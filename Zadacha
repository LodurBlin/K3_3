/*
Задача
Реализация сигналов и обработчиков

Для организации взаимодействия объектов вне схемы взаимосвязи используется механизм сигналов и обработчиков. Вместе с передачей сигнала еще передается определенное множество данных. Механизм сигналов и обработчиков реализует схему взаимодействия объектов один ко многим.

Реализовать механизм взаимодействия объектов с использованием сигналов и обработчиков, с передачей вместе сигналом текстового сообщения (строковой переменной).
Для организации взаимосвязи по механизму сигналов и обработчиков в базовый класс добавить три метода:
1. Установления связи между сигналом текущего объекта и обработчиком целевого объекта;
2. Удаления (разрыва) связи между сигналом текущего объекта и обработчиком целевого объекта;
3. Выдачи сигнала от текущего объекта с передачей строковой переменной. Включенный объект может выдать или обработать сигнал.


Методу установки связи передать указатель на метод сигнала текущего объекта, указатель на целевой объект и указатель на метод обработчика целевого объекта.
Методу удаления (разрыва) связи передать указатель на метод сигнала текущего объекта, указатель на целевой объект и указатель на метод обработчика целевого объекта.
Методу выдачи сигнала передать указатель на метод сигнала и строковую переменную. В данном методе реализовать алгоритм:
1. Вызов метода сигнала с передачей строковой переменной по ссылке.
2. Цикл по всем связям сигнал-обработчик текущего объекта.
   2.1. Если в очередной связи сигнал-обработчик участвует метод сигнала, переданный по параметру, то вызвать метод обработчика очередного целевого объекта и передать в качестве аргумента строковую переменную по значению.
3. Конец цикла.
Для приведения указателя на метод сигнала и на метод обработчика использовать параметризированное макроопределение препроцессора.

В базовый класс добавить метод определения абсолютного пути до текущего объекта. Этот метод возвращает абсолютный путь текущего объекта.

Состав и иерархия объектов строится посредством ввода исходных данных.  Ввод организован как в версии № 3 курсовой работы.
Система содержит объекты шести классов с номерами: 1,2,3,4,5,6. Классу корневого объекта соответствует номер 1. В каждом производном классе реализовать один метод сигнала и один метод обработчика.
Каждый метод сигнала с новой строки выводит:
Signal from «абсолютная координата объекта»
Каждый метод сигнала добавляет переданной по параметру строке текста номер класса принадлежности текущего объекта по форме:
«пробел»(class: «номер класса»)
Каждый метод обработчика с новой строки выводит:
Signal to «абсолютная координата объекта» Text:  «переданная строка»

Реализовать алгоритм работы системы:
1. В методе построения системы:
   1.1. Построение дерева иерархии объектов согласно вводу.
   1.2. Ввод и построение множества связей сигнал-обработчик для заданных пар объектов.
2. В методе отработки системы:
   2.1. Привести все объекты в состоянии готовности.
   2.2. Цикл до признака завершения ввода.
        2.2.1. Ввод наименования объекта и текста сообщения.
        2.2.2. Вызов сигнала заданного объекта и передача в качестве аргумента строковой переменной, содержащей текст сообщения.
   2.3. Конец цикла.
  
Допускаем, что все входные данные вводятся синтаксически корректно. Контроль корректности входных данных можно реализовать для самоконтроля работы программы.
Не оговоренные, но необходимые функции и элементы классов добавляются разработчиком.

При решении задачи необходимо руководствоваться методическим пособием и приложением к методическому пособию

Входные данные
В методе построения системы.
Множество объектов, их характеристики и расположение на дереве иерархии. Структура данных для ввода согласно изложенному в версии № 3 курсовой работы.
После ввода состава дерева иерархии построчно вводится:
координата объекта выдающего сигнал координата целевого объекта
Ввод информации для построения связей завершается строкой, которая содержит
end_of_connections

В методе запуска (отработки) системы.
Построчно вводятся множество команд в производном порядке:
EMIT координата объекта текст - выдать сигнал от заданного по координате объекта;
SET_CONNECT координата объекта выдающего сигнал координата целевого объекта - установка связи;
DELETE_CONNECT координата объекта выдающего сигнал координата целевого объекта - удаление связи;
SET_CONDITION координата объекта значение состояния - установка состояния объекта.
END – завершить функционирование системы (выполнение программы).
Команда END присутствует обязательно.
Если координата объекта задана некорректно, то соответствующая операция не выполняется и с новой строки выдается сообщение об ошибке. 
Если не найден объект по координате:
Object координата объекта not found
Если не найден целевой объект по координате:
Handler object координата целевого объекта not found

Пример ввода
appls_root
/ object_s1 3
/ object_s2 2
/object_s2 object_s4 4
/ object_s13 5
/object_s2 object_s6 6
/object_s1 object_s7 2
endtree
/object_s2/object_s4 /object_s2/object_s6
/object_s2 /object_s1/object_s7
/ /object_s2/object_s4
/object_s2/object_s4 /
end_of_connections
EMIT /object_s2/object_s4 Send message 1 
DELETE_CONNECT /object_s2/object_s4 /
EMIT /object_s2/object_s4 Send message 2
SET_CONDITION /object_s2/object_s4 0
EMIT /object_s2/object_s4 Send message 3
SET_CONNECT /object_s1 /object_s2/object_s6
EMIT /object_s1 Send message 4
END

Выходные данные
Первая строка:
Object tree
Со второй строки вывести иерархию построенного дерева.
Далее, построчно, если отработал метод сигнала:
Signal from абсолютная координата объекта

Если отработал метод обработчика:
Signal to абсолютная координата объекта Text:  переданная строка


Пример вывода
Object tree
appls_root
    object_s1
        object_s7
    object_s2
        object_s4
        object_s6
    object_s13
Signal from /object_s2/object_s4
Signal to /object_s2/object_s6 Text:  Send message 1 (class: 4)
Signal to / Text:  Send message 1 (class: 4)
Signal from /object_s2/object_s4
Signal to /object_s2/object_s6 Text:  Send message 2 (class: 4)
Signal from /object_s1
Signal to /object_s2/object_s6 Text:  Send message 4 (class: 3)
*/




Объекты потокового ввода/вывода cin/cout
Функция для ввода данных из потока до строкового разделителя - getline
Объект vector класса vector
Оператор определения новых типов данных - typedef
Тип данных - TYPE_SIGNAL (тип метода сигнала объекта)
Тип данных - TYPE_PROCESS (тип метода обработчика сигнала)
Параметризированные макроопределения препроцессора SIGNAL_D И
PROCESS_D для получения ссылки на методы сигнала и обработчика
соответственно
Объекты структуры container
Класс Hierarchy:
Поля:
 Поле структуры связей:
 Наименование: connection
 Тип: структура
 Модификатор доступа: private
 Поля:
1. Поле метода сигнала
1. Наименование: signal
2. Тип: TYPE_SIGNAL
2. Поле объекта-обработчика
Наименование: obj
Тип: указатель на объект класса Hierarchy
3. Поле метода обработчика
Наименование: process
Тип: TYPE_PROCESS
 Поле массива связей:
Наименование: cons
Тип: вектор
Модификатор доступа: private
 Поле номера класса:
Наименование: classNum
Тип: целочисленный
Модификатор доступа: protected
Функционал:
Метод setConnection. Устанавливает связь между сигналом текущего объекта и
обработчиком целевого
Метод delConnection. Разрывает связь между сигналом текущего объекта и
обработчиком целевого
Метод emitSignal. Подаёт сигнал от текущего объекта
Метод getAbs. Возвращает абсолютную координату объекта
Метод getClassNum. Возвращает номер класса объекта
Метод makeAllReady. Задает всем объектам значение поля готовности
Класс App:
Функционал:
Метод signal. Выдаёт сигнал
Метод process. Обработка сигнала
Метод getSignal. Возвращает ссылку на метод сигнала в зависимости от класса
объекта
Метод getProcess. Возвращает ссылку на метод обработчика в зависимости от
класса объекта
Метод hierarchy_Build. Выстраивает иерархию объектов и устанавливает связи
Метод execApp. Вывод дерева иерархии, обработка команд
Конструктор. Вызывает конструктор класса Hierarchy, задаёт значение номера
класса
Класс H2:
Функционал:
Метод signal. Выдаёт сигнал
Метод process. Обработка сигнала
Конструктор. Вызов конструктора класса Hierarchy, присвоение номера класса
Класс H3:
Функционал:
Метод signal. Выдаёт сигнал
Метод process. Обработка сигнала
Конструктор. Вызов конструктора класса Hierarchy, присвоение номера класса
Класс H4:
Функционал:
Метод signal. Выдаёт сигнал
Метод process. Обработка сигнала
Конструктор. Вызов конструктора класса Hierarchy, присвоение номера класса
Класс H5:
Функционал:
Метод signal. Выдаёт сигнал
Метод process. Обработка сигнала
Конструктор. Вызов конструктора класса Hierarchy, присвоение номера класса
Класс H6:
Функционал:
Метод signal. Выдаёт сигнал
Метод process. Обработка сигнала
Конструктор. Вызов конструктора класса Hierarchy, присвоение номера класса




